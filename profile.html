<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JAYU STR - Profile</title>
  <style>
    body { background: #121212; color: white; font-family: Arial, sans-serif; margin: 0; padding: 0; }
    .navbar { background: #1DB954; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; }
    .navbar a { color: white; text-decoration: none; margin-left: 15px; font-weight: bold; }
    .navbar .username { font-weight: bold; margin-right: 15px; }
    .container { padding: 20px; }
    .song-card { background: #1e1e1e; padding: 15px; border-radius: 5px; margin-bottom: 15px; }
    .song-card iframe { width: 100%; height: 200px; border: none; margin-top: 10px; }
    button { margin-top: 10px; margin-right: 10px; padding: 8px 12px; background: #1DB954; border: none; border-radius: 5px; color: white; cursor: pointer; font-weight: bold; }
    .button-group { margin-top: 10px; }
    .upload-section { margin-bottom: 30px; background: #1e1e1e; padding: 15px; border-radius: 5px; }
    .upload-section input, .upload-section select { padding: 8px; margin-right: 10px; border: none; border-radius: 5px; }
  </style>
</head>
<body>
  <div class="navbar">
    <div>
      <a href="index.html">üè† Home</a>
      <a href="profile.html">üë§ Profile</a>
    </div>
    <div>
      <span class="username">üëë JAYU STAR</span>
      <a href="login.html">Logout</a>
    </div>
  </div>

  <div class="container">
    <div class="upload-section">
      <h2>Upload New Song</h2>
      <input type="text" id="songTitle" placeholder="Song Title">
      <input type="text" id="youtubeLink" placeholder="YouTube Link or ID">
      <select id="songCategory">
        <option value="Chill">Chill</option>
        <option value="EDM">EDM</option>
        <option value="Timli">Timli</option>
        <option value="Timli">Hindi</option>
        <option value="Timli">Mashup</option>
      </select>
      <button onclick="uploadSong()">Upload</button>
    </div>

    <h2>All Songs</h2>
    <div id="songsContainer"></div>
  </div>

  <script>
    const songs = JSON.parse(localStorage.getItem("songs")) || [];

    function renderSongs() {
      const container = document.getElementById("songsContainer");
      container.innerHTML = "";

      songs.forEach((song, index) => {
        const card = document.createElement("div");
        card.className = "song-card";
        card.innerHTML = `
          <h3>${song.title}</h3>
          <p>Category: ${song.category}</p>
          <iframe src="https://www.youtube.com/embed/${extractYouTubeID(song.id)}" allowfullscreen></iframe>
          <div class="button-group">
            <a href="https://v2.youconvert.net/enf/?url=https://www.youtube.com/watch?v=${extractYouTubeID(song.id)}" target="_blank">
              <button>Download MP3</button>
            </a>
            <button onclick="editSong(${index})">Edit</button>
            <button onclick="deleteSong(${index})">Delete</button>
          </div>
        `;
        container.appendChild(card);
      });
    }

    function extractYouTubeID(linkOrId) {
      if (linkOrId.includes("youtube.com") || linkOrId.includes("youtu.be")) {
        const match = linkOrId.match(/(?:v=|\/)([0-9A-Za-z_-]{11})/);
        return match ? match[1] : linkOrId;
      }
      return linkOrId;
    }

    function uploadSong() {
      const title = document.getElementById("songTitle").value.trim();
      const id = document.getElementById("youtubeLink").value.trim();
      const category = document.getElementById("songCategory").value;

      if (!title || !id) {
        alert("Please enter both title and YouTube link or ID.");
        return;
      }

      songs.push({ title, id, category });
      localStorage.setItem("songs", JSON.stringify(songs));
      renderSongs();

      document.getElementById("songTitle").value = "";
      document.getElementById("youtubeLink").value = "";
    }

    function editSong(index) {
      const song = songs[index];
      const newTitle = prompt("Edit title:", song.title);
      if (newTitle !== null) {
        song.title = newTitle;
        localStorage.setItem("songs", JSON.stringify(songs));
        renderSongs();
      }
    }

    function deleteSong(index) {
      if (confirm("Are you sure you want to delete this song?")) {
        songs.splice(index, 1);
        localStorage.setItem("songs", JSON.stringify(songs));
        renderSongs();
      }
    }

    renderSongs();
  </script>
</body>
</html>
